# üé≠ Telegram-–±–æ—Ç "–û—Ç–º–∞–∑–æ—á–Ω–∏–∫"

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–º–∞–∑–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª—è—Ö —Å –ø–æ–º–æ—â—å—é LLM.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp env.example .env

# 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª:
# TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
# OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á_–æ—Ç_openrouter
# LLM_BASE_URL=https://gptunnel.ru/v1
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

**Telegram –±–æ—Ç:**
1. –ù–∞–ø–∏—à–∏—Ç–µ @BotFather –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª

**OpenRouter API:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://openrouter.ai
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ gptunnel.ru

### 3. –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
docker compose up

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
docker compose up --build

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f bot
```

## üé® –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∏–ª–∏

- **üí™ –ë—ã–¥–ª–æ** - –ì—Ä—É–±–æ–≤–∞—Ç—ã–µ, –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–µ –æ—Ç–º–∞–∑–∫–∏ —Å –∂–∞—Ä–≥–æ–Ω–æ–º
- **üíº –ö–æ—Ä–ø–æ—Ä–∞—Ç** - –î–µ–ª–æ–≤—ã–µ, –±—é—Ä–æ–∫—Ä–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–º–∞–∑–∫–∏ –≤ –æ—Ñ–∏—Å–Ω–æ–º —Å—Ç–∏–ª–µ  
- **üôè –ú–æ–Ω–∞—Ö** - –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ, –º—É–¥—Ä—ã–µ –æ—Ç–º–∞–∑–∫–∏ —Å –¥—É—Ö–æ–≤–Ω—ã–º –ø–æ–¥—Ç–µ–∫—Å—Ç–æ–º
- **üîÆ –ò–Ω—Ñ–æ—Ü—ã–≥–∞–Ω** - –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ, —ç–∑–æ—Ç–µ—Ä–∏—á–µ—Å–∫–∏–µ –æ—Ç–º–∞–∑–∫–∏ —Å –º–∞–≥–∏–µ–π
- **üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Å—Ç–∏–ª—å** - –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –∏–∑ –≤—Å–µ—Ö —Å—Ç–∏–ª–µ–π

## üì± –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/start`
2. –û–ø–∏—à–∏—Ç–µ —Å–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é (–º–∞–∫—Å 200 —Å–∏–º–≤–æ–ª–æ–≤)
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
4. –ü–æ–ª—É—á–∏—Ç–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω—É—é –æ—Ç–º–∞–∑–∫—É!

**–ö–æ–º–∞–Ω–¥—ã:**
- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/help` - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç–∏–ª–µ–π

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_BOT_TOKEN=your_bot_token_here
OPENROUTER_API_KEY=your_openrouter_key_here

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ  
LLM_BASE_URL=https://gptunnel.ru/v1    # URL LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
LOG_LEVEL=INFO                          # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (app/config.py)

- `MODEL_NAME` - –ú–æ–¥–µ–ª—å LLM (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: gpt-4o)
- `MAX_TOKENS` - –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –æ—Ç–≤–µ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 100)
- `TEMPERATURE` - –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.7)
- `MAX_MESSAGE_LENGTH` - –õ–∏–º–∏—Ç –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 200)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `logs/`:

- `logs/app.log` - –û–±—â–∏–µ —Å–æ–±—ã—Ç–∏—è –±–æ—Ç–∞
- `logs/errors.log` - –û—à–∏–±–∫–∏ —Å —Ç—Ä–µ–π—Å–±—ç–∫–∞–º–∏
- `logs/requests.log` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose logs -f bot

# –§–∞–π–ª—ã –ª–æ–≥–æ–≤
tail -f logs/app.log
tail -f logs/errors.log  
tail -f logs/requests.log
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ bot.py            # Telegram handlers, inline –∫–Ω–æ–ø–∫–∏
‚îú‚îÄ‚îÄ llm_client.py     # LLM API, retry –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ prompts.py        # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª–µ–π
‚îî‚îÄ‚îÄ styles.py         # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π –æ—Ç–º–∞–∑–æ–∫
```

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Python 3.11+
- aiogram (Telegram Bot API)
- OpenAI client (–¥–ª—è OpenRouter)
- Docker + Docker Compose

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
python test_llm.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs bot

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose up --build
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

- **TELEGRAM_BOT_TOKEN is required** - –ù–µ —É–∫–∞–∑–∞–Ω —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ .env
- **OPENROUTER_API_KEY is required** - –ù–µ —É–∫–∞–∑–∞–Ω API –∫–ª—é—á –≤ .env
- **LLM request timeout** - –ú–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- **Rate limit exceeded** - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- Fallback –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ LLM
- –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ —Å—Ç–∏–ª—è–º
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ LLM

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
python -m app.main

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ LLM
python test_llm.py
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.

---

**üé≠ –ë–æ—Ç –≥–æ—Ç–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–º–∞–∑–∫–∏!**